<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Call Data Procedure page Tester</title>
    <link rel="stylesheet" type="text/css" media="screen" href="../../static/gridThemes/basic/grid.css" />
    
    <!-- Of course we should load the jquery library -->
    <script src="../../static/js/jquery/jquery.js" type="text/javascript"></script>

    <!-- and at end the jqGrid Java Script file -->
    <script src="../../static/js/jquery/grid/jquery.jqGrid.js"type="text/javascript"></script>

    <script type="text/javascript">
        jQuery(document).ready(function() {
            jQuery("#list").jqGrid({ url: '../../pages/CallDataProcedure.aspx',
                datatype: 'xml',
                mtype: 'POST',
                colNames: ['Client ID', 'Client Name', 'Team Log ID', 'Team', 'Score', 'Kills', 'Deaths', 'Team Kills', 'Self Kills', 'Carrier Kills', 'Recoveries', 'Steals', 'Pickups', 'Captures'],
                colModel: [{ name: 'ClientID', index: 1, width: 50, hidden: true },
                    { name: 'ClientName', index: 2, width: 160 },
                    { name: 'TeamLogID', index: 3, width: 50, hidden: true },
                    { name: 'Team', index: 4, width: 55 },
                    { name: 'Score', index: 5, width: 57, align: 'right' },
                    { name: 'Kills', index: 6, width: 50, align: 'right' },
                    { name: 'Deaths', index: 7, width: 63, align: 'right' },
                    { name: 'TeamKills', index: 8, width: 90, align: 'right' },
                    { name: 'SelfKills', index: 9, width: 75, align: 'right' },
                    { name: 'CarrierKills', index: 9, width: 95, align: 'right' },
                    { name: 'FlagRecoveries', index: 9, width: 90, align: 'right' },
                    { name: 'FlagSteals', index: 9, width: 70, align: 'right' },
                    { name: 'FlagPickups', index: 9, width: 70, align: 'right' },
                    { name: 'FlagCaptures', index: 9, width: 80, align: 'right' }],
                pager: jQuery('#pager'),
                rowNum: 10,
                rowList: [5, 10, 25],
                sortname: 5,
                sortorder: 'desc',
                viewrecords: true,
                imgpath: '../../static/gridThemes/basic/images',
                caption: 'Testing Data Procedure Caller w/ Game Stats for game: 23571',
                height: 'auto',
                loadonce: true,
                postData: { idrow: 0,               // unique row used as id
                    proc: 'DataProcedures.spGetGameResults',     // stored procedure to call (must be in approved list for user)
                    arg0: 23571}                     // all other arguments starting with 'arg' are params to proc
                });
            }).navGrid('#pager', { edit: false, add: false, del: false }); 
    </script>
</head> 
<body> 
    <table id="list" class="scroll"></table> 
    <div id="pager" class="scroll" style="text-align:center;"></div> 
</body> 
</html>